---
version: 2
jobs:
  build:
    parallelism: 1
    docker:
      - image: cimg/base:2020.01
    steps:
      # Machine Setup
      - checkout

      # install pdf latex package
      - run: sudo apt-get update
      - run: sudo apt-get install texlive -y

      # build pdf
      - run: pdflatex resume.tex
  deploy:
    parallelism: 1
    docker:
      - image: cimg/base:2020.01
    steps:
      - aws s3 cp resume.pdf s3://www-cowholio4-com/

workflows:
  version: 2
  build-and-deploy:
    jobs:
      - build
      - deploy:
          requires:
            - build
          context: aws-cowholio4
          filters:
            branches:
              only: master
